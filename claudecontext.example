# .claudecontext - Example Template

# Copy this file to your project root as `.claudecontext`
# Customize the sections marked with [BRACKETS]

# Project: [YOUR_PROJECT_NAME]

## Project Type
[X] Docker Application (On-Prem)
[ ] AWS Serverless (Mono-repo)

## Baseline Standards
Primary Reference: https://github.com/vestgoteUptive/claude-baseline
- Core Patterns: https://github.com/vestgoteUptive/claude-baseline/blob/main/CORE-PATTERNS.md
- LLM Standards: https://github.com/vestgoteUptive/claude-baseline/blob/main/LLM-OPTIMIZED-STANDARDS.md
- Full Documentation: https://github.com/vestgoteUptive/claude-baseline/blob/main/README.md

Local Copy: .standards/CORE-PATTERNS.md (if copied locally)

## Tech Stack

### Frontend
- Framework: React 18+ with TypeScript
- Styling: Tailwind CSS v3+
- Build Tool: Vite
- State Management: React Context + Hooks
- Testing: Vitest + React Testing Library

### Backend
- Language: Go 1.21+
- Framework: Gin (HTTP router)
- Testing: Go standard testing + testify
- Logging: Structured JSON (zap)

### Database
- Type: [PostgreSQL 15 / MongoDB 7 / DynamoDB]
- Migrations: golang-migrate/migrate [for PostgreSQL]

### Infrastructure
- Deployment: [Docker Compose / AWS CDK]
- CI/CD: GitHub Actions
- Container Registry: [ghcr.io / ECR]

## Architecture Overview

[Brief description of your application architecture]

Example:
```
Single-service application for [PURPOSE]:
- Frontend: React SPA served via Nginx
- Backend: RESTful API in Go
- Database: PostgreSQL with user and [entity] tables
- Deployment: docker-compose on Unraid server
```

## Database Schema

### [Table/Collection Name]
```sql
-- PostgreSQL Example
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    deleted_at TIMESTAMP WITH TIME ZONE,
    
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    cognito_id VARCHAR(255) UNIQUE,
    role VARCHAR(50) DEFAULT 'user'
);

CREATE INDEX idx_users_email ON users(email) WHERE deleted_at IS NULL;
CREATE INDEX idx_users_cognito ON users(cognito_id) WHERE deleted_at IS NULL;
```

### [Additional Tables]
```sql
-- Add your other tables here
```

### DynamoDB Schema (if using AWS)
```
Table: [table-name]
- PK (Partition Key): [ENTITY]#[id]
- SK (Sort Key): [TYPE] or [RELATION]#[id]

GSI: [index-name]
- PK: [attribute]
- SK: created_at

Example:
- PK: USER#123, SK: PROFILE
- PK: USER#123, SK: ORDER#001
```

## API Endpoints

### Authentication
- POST /api/v1/auth/login - User login (Cognito)
- POST /api/v1/auth/logout - User logout
- POST /api/v1/auth/refresh - Refresh JWT token

### [Resource Name]
- GET /api/v1/[resource] - List [resources] (supports pagination: ?limit=10&offset=0)
- GET /api/v1/[resource]/:id - Get single [resource] by ID
- POST /api/v1/[resource] - Create new [resource]
- PUT /api/v1/[resource]/:id - Update [resource] (full update)
- PATCH /api/v1/[resource]/:id - Update [resource] (partial update)
- DELETE /api/v1/[resource]/:id - Delete [resource]

### [Additional Resources]
- [Add your other endpoints]

## Environment Variables

See `.env.example` for all required variables.

Critical variables:
```bash
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# Authentication
JWT_SECRET=your-secret-key-here
COGNITO_REGION=us-east-1
COGNITO_USER_POOL_ID=us-east-1_xxxxx
COGNITO_CLIENT_ID=xxxxx

# Application
PORT=8080
ENVIRONMENT=development

# [Add your other variables]
```

## Key Patterns & Conventions

### API Response Format
All API responses follow this structure:
```json
{
  "data": { ... },
  "error": {
    "code": "ERROR_CODE",
    "message": "Human readable message",
    "details": { "field": "constraint" }
  },
  "metadata": {
    "timestamp": "2026-01-14T10:00:00Z",
    "request_id": "abc-123"
  }
}
```

### Error Handling
- Handlers return `dto.Error(code, message, details)` for errors
- Handlers return `dto.Success(data)` for successful responses
- Common error codes: VALIDATION_ERROR, NOT_FOUND, DUPLICATE_ERROR, UNAUTHORIZED

### Code Organization
Follow layered architecture from baseline:
- Handler → Service → Repository → Database
- Handlers: HTTP/Lambda entry, bind request, call service, return response
- Service: Business logic, validation, orchestration  
- Repository: Database access only

## File Locations

### Backend (Go)
- Main entry: `cmd/server/main.go`
- Handlers: `internal/api/handlers/`
- Middleware: `internal/api/middleware/`
- Services: `internal/service/`
- Repositories: `internal/repository/`
- Models: `internal/models/`
- Router: `internal/api/router.go`
- Migrations: `migrations/`
- OpenAPI spec: `docs/swagger.yaml`

### Frontend (React)
- Main entry: `src/main.tsx`
- Components: `src/components/` (ui/ for shared, features/ for specific)
- Pages: `src/pages/`
- Contexts: `src/contexts/` (AuthContext, etc.)
- Hooks: `src/hooks/`
- API client: `src/lib/api/generated/` (auto-generated from OpenAPI)
- Utils: `src/lib/utils.ts`

### Infrastructure
- Docker: `docker-compose.yml` (single file)
- AWS CDK: `infrastructure/lib/stacks/`
- CI/CD: `.github/workflows/`

## External Integrations

### [Integration Name]
- Purpose: [What it does]
- Authentication: [How to authenticate]
- Endpoints used: [List key endpoints]

Example:
```
### AWS Cognito
- Purpose: User authentication and JWT token management
- Configuration: User Pool ID and Client ID in environment variables
- Flow: Login → Cognito validates → Returns JWT → Backend validates JWT
```

## Development Commands

### Docker
```bash
# Start all services
docker-compose up -d

# View logs
docker-compose logs -f [service]

# Rebuild specific service
docker-compose up -d --build [service]

# Stop all services
docker-compose down

# Run migrations
docker-compose exec backend migrate -path migrations -database $DATABASE_URL up
```

### Local Development
```bash
# Frontend
cd frontend
npm install
npm run dev        # Starts Vite dev server on :3000

# Backend
cd backend
go mod download
go run cmd/server/main.go  # Starts API on :8080

# Tests
npm test           # Frontend tests
go test ./...      # Backend tests
```

### Database
```bash
# Create migration
migrate create -ext sql -dir migrations -seq [migration_name]

# Run migrations up
migrate -path migrations -database $DATABASE_URL up

# Rollback one migration
migrate -path migrations -database $DATABASE_URL down 1
```

## Testing Strategy

### Unit Tests
- Backend: Test service layer business logic with mocked repositories
- Frontend: Test components with React Testing Library
- Coverage target: >80% for business logic

### Integration Tests
- [Describe your integration test approach if any]

## Special Considerations

### [Feature/Area Name]
[Any special notes about implementation, gotchas, or important context]

Example:
```
### Rate Limiting
- LinkedIn scraper implements 2-second delay between connection fetches
- This prevents detection and account blocking
- Configurable via SCRAPE_DELAY_MS environment variable
```

## Dependencies on Other Services

[List any dependencies on other microservices, if applicable]

Example:
```
- Depends on auth-service for JWT validation
- Publishes events to EventBridge topic: user-events
```

## Recent Architectural Decisions

### [Decision Title]
Date: YYYY-MM-DD
- Decision: [What was decided]
- Reasoning: [Why]
- Impact: [What this affects]

Example:
```
### Use DynamoDB Instead of Aurora
Date: 2026-01-14
- Decision: Use DynamoDB with on-demand billing
- Reasoning: Low traffic POC, simple key-value access pattern, cost optimization
- Impact: Limited query capabilities, but sufficient for current needs
```

## Project-Specific Notes

[Any additional context that Claude Code should know about your project]

Example:
```
- This is a proof-of-concept, so cost optimization is prioritized over scalability
- LinkedIn scraper should be minimally invasive (avoid deep profile scraping)
- All scraped data stays local (SQLite), never sent to external services
```

---

## How to Use This File with Claude Code

### When Starting a New Feature
```
Prompt: "Read .claudecontext for project patterns. Create OrderService 
following the UserService pattern. Endpoints: GET /orders, POST /orders"
```

### When Fixing Bugs
```
Prompt: "Context: .claudecontext. Fix error in internal/handlers/user.go:45
Error: [paste error message]
Expected: Return dto.Error with DUPLICATE_EMAIL code"
```

### When Following Patterns
```
Prompt: "Following patterns in .claudecontext and 
https://github.com/vestgoteUptive/claude-baseline/blob/main/CORE-PATTERNS.md
Create new feature: [description]"
```

### When Referring to Baseline Standards
```
Prompt: "Use Go backend handler pattern from 
https://github.com/vestgoteUptive/claude-baseline/blob/main/LLM-OPTIMIZED-STANDARDS.md
Implement: [endpoint description]"
```

---

## Maintenance

Last Updated: [DATE]
Baseline Version: v1.0.0
Author: [YOUR_NAME]
